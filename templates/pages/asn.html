{% extends 'base.html' %}

{% block title %}
AS{{ asn }}
{% endblock %}

{% block headers %}
<!-- IBM Carbon Components -->
<script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.31.0/tabs.min.js"></script>
<script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.25.2/text-input.min.js"></script>
<!-- IBM Carbon Charts -->
<script src="https://cdn.jsdelivr.net/npm/@carbon/charts@1/dist/umd/bundle.umd.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/@carbon/charts@1/styles.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="content__asn">
    <div class="asn__header">
        <div class="header__wrapper">
            <div class="wrapper__container">
                <div class="container__breadcrumbs">
                    <a href="/" class="breadcrumbs__item">Home</a>
                </div>
                <h2 class="container__title" id="asn">AS{{ asn }}</h2>
            </div>
        </div>
    </div>
    <div class="asn__tabs">
        <div class="tabs__wrapper">
            <div class="wrapper__container">
                <div class="container__tabs" id="tabs">
                    <div class="tab__item tab__item--active" target="overview">
                        Overview
                    </div>
                    <div class="tab__item" target="prefixes">
                        All Prefixes
                    </div>
                    <div class="tab__item" target="connectivity">
                        Connectivity
                    </div>
                    <div class="tab__item" target="measurements">
                        Measurements
                    </div>
                    <div class="tab__item" target="whois">
                        Whois
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="asn__content">
        <div class="content__wrapper">
            <div class="wrapper__container">
                <div class="container__content">
                    <div class="content__panel" id="overview" aria-labelledby="tab-overview">
                        Tab Panel 1
                    </div>
                    <div class="content__panel" id="prefixes" aria-labelledby="tab-prefixes">
                        Tab Panel 2
                    </div>
                    <div class="content__panel" id="connectivity" aria-labelledby="tab-connectivity">
                        Tab Panel 3
                    </div>
                    <div class="content__panel" id="measurements" aria-labelledby="tab-measurements">
                        Tab Panel 4
                    </div>
                    <div class="content__panel" id="whois" aria-labelledby="tab-whois">
                        Tab Panel 5
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.tab__item');
    const panels = document.querySelectorAll('.content__panel');
    
    // Function to switch tabs
    const switchTab = (targetId) => {
        // Update URL hash without triggering scroll
        history.replaceState(null, null, `#${targetId}`);
        
        // Update active tab
        tabs.forEach(tab => {
            if (tab.getAttribute('target') === targetId) {
                tab.classList.add('tab__item--active');
            } else {
                tab.classList.remove('tab__item--active');
            }
        });
        
        // Show corresponding panel
        panels.forEach(panel => {
            if (panel.id === targetId) {
                panel.style.display = 'block';
            } else {
                panel.style.display = 'none';
            }
        });
    };
    
    // Add click handlers to tabs
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const targetId = tab.getAttribute('target');
            switchTab(targetId);
        });
    });
    
    // Handle initial load and hash changes
    const handleHashChange = () => {
        const hash = window.location.hash.slice(1) || 'overview';
        switchTab(hash);
    };
    
    // Listen for hash changes
    window.addEventListener('hashchange', handleHashChange);
    
    // Initial load
    handleHashChange();
});
</script>
{% endblock %}